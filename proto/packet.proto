syntax = "proto3";
package pb;
option  go_package = "../pb";  // 声明生成的 go 文件所属的包

// 服务器类型
enum ClusterType {
    NONE = 0;
    GATE = 1;  // 网关,转发服务
    GAME = 2;  // game
    DB   = 3;  // db
};

// 发送标志
enum SendType {
    POINT     = 0;  // 指定集群id
    BOARDCAST = 1;  // 广播
};

// 集群信息
message ClusterNode {
    ClusterType ClusterType = 1;
    string      Ip          = 2;
    int32       Port        = 3;
    uint32      ClusterID   = 4;
}

// 包头
message PacketHead {
    uint32      SrcClusterID   = 1;  // 源集群id
    ClusterType SrcClusterType = 2;  // 源服务类型
    uint32      DstClusterID   = 3;  // 目标集群id 大于0优先
    ClusterType DstClusterType = 4;  // 目标集群类型
    SendType    SendType       = 5;  // 传输协议
    uint32      SeqID          = 6;  // 序列号
    uint64      UID            = 7;  // 目标玩家uid
    int32       ApiCode        = 8;  // 请求接口唯一id
    int64       Time           = 9;
}

// 原始包
message Packet {
    PacketHead Head = 1;  // 包头
    bytes      Buff = 2;  // proto压缩数据
}

// 客户端包头
message RpcHead {
    int32  Code   = 1;  // 错误码 ErrorCode
    string ErrMsg = 2;  // 错误信息
}

// 服务之前调用包头（任意参数接口调用）
message ActorRequest {
    RpcHead Head      = 1;
    string  ActorName = 2;
    string  FuncName  = 3;
    bytes   Buff      = 4;
}

message ActorResponse {
    RpcHead Head = 1;
    bytes   Buff = 2;
}

message LoginRequest {
    RpcHead Head = 1;
}

message LoginResponse {
    RpcHead Head = 1;
}
