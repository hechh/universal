syntax = "proto3";
package universal;

option go_package = "universal/common/pb";

// 发送类型
enum SendType {
  POINT     = 0;  // 发送类型-点对点
  BROADCAST = 1;  // 发送类型-广播
}

enum RouterType {
  UID       = 0;  // UID路由
  ROOM_ID   = 1;  // 房间id路由
  RANDOM_ID = 2;  // 随机id路由
}

enum NodeType {
  Begin  = 0;  // 节点类型-begin
  Gate   = 1;  // 节点类型-Gate
  Match  = 2;  // 节点类型-Match
  Room   = 3;  // 节点类型-Room
  Db     = 4;  // 节点类型-Db
  Build  = 5;  // 节点类型-Build
  Gm     = 6;  // 节点类型-Gm
  Game   = 7;  // 节点类型-Game
  End    = 8;  // 节点类型-End
  Client = 9;  // 节点类型-Client
}

message Node {
  string   Name = 1;  // 节点名称
  NodeType Type = 4;  // 节点类型
  int32    Id   = 5;  // 节点ID
  string   Ip   = 2;  // ip地址
  int32    Port = 3;  // 端口
}

message Router {
  int32 Gate  = 1;
  int32 Game  = 2;
  int32 Db    = 3;
  int32 Build = 4;
  int32 Room  = 5;
  int32 Match = 6;
  int32 Gm    = 7;
}

message NodeRouter {
  NodeType NodeType  = 1;
  int32    NodeId    = 2;
  uint64   RouterId  = 3;
  uint32   ActorFunc = 4;
  uint64   ActorId   = 5;
  Router   Router    = 6;
}

message Head {
  SendType   SendType  = 1;
  NodeRouter Src       = 2;
  NodeRouter Dst       = 3;
  uint64     Uid       = 4;
  uint32     Seq       = 5;
  uint32     Cmd       = 6;
  uint32     Reference = 7;
  string     Reply     = 8;
  string     ActorName = 9;
  string     FuncName  = 10;
  uint64     ActorId   = 11;
}

message Packet {
  Head  Head = 1;
  bytes Body = 2;
}

message RspHead {
  int32  Code   = 1;
  string ErrMsg = 2;
}
